<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Exercise 1 - Post Data Analysis</title>
  </head>
  <body>
    <h2>ðŸ“Š Post Data Analysis</h2>
    <div id="post-stats">Loading ...</div>

    <script>
      async function fetchAndAnalyzePosts() {
        try {
          // load data from API
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts"
          );
          const posts = await response.json();

          // analyze
          const totalPosts = posts.length;
          const avgTitleLength =
            posts.reduce((sum, p) => sum + p.title.length, 0) / totalPosts;
          const postsByUser1 = posts.filter((p) => p.userId === 1).length;

          // display results
          document.getElementById("post-stats").innerHTML = `
          <p><b>Total posts:</b> ${totalPosts}</p>
          <p><b>Average title:</b> ${avgTitleLength.toFixed(2)}</p>
          <p><b>Number of posts by userId = 1:</b> ${postsByUser1}</p>
        `;
        } catch (error) {
          document.getElementById(
            "post-stats"
          ).innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
        }
      }

      fetchAndAnalyzePosts();
    </script>
  </body>
</html>
